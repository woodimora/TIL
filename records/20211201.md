# MSA 란?

## MSA
Micro Service Architecture   
하나의 큰 어플리케이션을 여러개의 작은 어플리케이션으로 쪼개어 변경과 조합이 가능하도록 만든 아키텍쳐

## MSA 등장배경
### Monolithic Architecture
Monolithic Architecture 란 소프트웨어의 모든 구성요소가 한 프로젝트에 통합되어있는 형태이다. 많은 소프트웨어가 Monolithic 형태로 구현되어 있고, 소규모 프로젝트에서는 Monolithic Architecture가 훨씬 합리적이다. 하지만 일정 규모 이상의 서비스, 혹은 수백명의 개발자가 투입되는 프로젝트에서 Monolithic Architecture는 뚜렷한 한계가 있다.

- 서비스/프로젝트가 커지면 커질수록, 영향도 파악 및 전체 시스템 구조의 파악에 어렵다.
- 빌드 시간 및 테스트시간, 그리고 배포시간이 기하급수적으로 늘어난다.
- 서비스를 부분적으로 scale-out하기가 힘들다.
- 부분의 장애가 전체 서비스의 장애로 이어지는 경우가 발생한다.
- 한 framework와 언어에 종속적이다.


## Micro Service 의 특징
![](https://media.vlpt.us/post-images/tedigom/575c07d0-f980-11e9-ac2c-696993348d8a/pic1.png)

### 데이터 분리
데이터 저장 시 하나의 DB에 중앙 집중화를 하지 않고 서비스 별 별도의 데이터 베이스를 사용한다. 데이터가 분산되어 있기 때문에 다른 서비스 컴포넌트에 대한 의존성 없이 서비스를 독립적으로 개발 및 배포/운영 할 수 있지만, 다른 컴포넌트의 데이터를 API통신을 통해 가져와야 하기 때문에 성능상의 문제가 발생 할 수 있고, 트랜젝션으로 묶을 수 없는 문제가 발생하기도 한다.

### API Gateway
서비스가 서로 다른 서버에 분리 배포되어 있기 때문에 서버 URL 이 각기 다를 수 밖에 없다. 이때 API Gateway는 API 서버 앞단에서 모든 API 서버들의 End-Point를 단일화하여 묵어주는 역할을 한다. 또한 구조가 복잡한 서비스간의 API 호출 구조도 단순화 시켜준다. 라우팅, 로드밸런싱, 인증 역할 등 여러 역할을 수행한다.

## MSA 의 장단점
### MSA 의 장점
- 배포 : 서비스 별 배포가 가능하다.
- 확장 : 특정 서비스에 대한 확장성이 용이하다.
- 장애 : 장애가 전체 서비스로 확장될 가능성이 적다.
- 신기술의 적용이 유연하다.

### 단점
- 성능 : 서비스 간 호출 시 API를 사용하기 때문에, 통신 비용이나, Latency가 그만큼 늘어난다.
- 테스트 / 트랜잭션 : 서비스가 분리되어 있기 때문에 테스트와 트랜잭션의 복잡도가 증가하고, 많은 자원을 필요로 한다.
- 데이터 관리 : 데이터가 여러 서비스에 걸쳐 분산되어 있기 때문에 한번에 조회가 어렵고, 데이터 정합성 또한 관리하기 어렵다.

참고 : https://velog.io/@tedigom/MSA-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-1-MSA%EC%9D%98-%EA%B8%B0%EB%B3%B8-%EA%B0%9C%EB%85%90-3sk28yrv0e   
https://wooaoe.tistory.com/57